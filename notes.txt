

BaseMaterial : {
	Ka, Kd, Ks
	Ca, Cd, Cs,
	shininess,
	transparency,
	receivesShadow,
	reflectsScene : scene,
	sceneTexture : scene
}

PhongMaterial : BaseMaterial {
 technque : PhongShadedTechnique
}

ReflectiveMaterial : BaseMaterial {
	freshnelParams : ...,
	technique : CubemapReflectionsTechnique,
	isReflective : true,
	reflectsScene : scene
}

scene.cubemap = some texture filename
scene.showCubemap = true | false
scene.add(mesh, phongMaterial)
scene.add(sphereMesh, reflectriveMaterial)
scene.postProcess(bloom, tonemap)

RenderContext {
	cubemap,
	transparentObjects,
	opaqueObjects,
	reflectiveObjects,
	scene,
	renderTarget,
	sceneCubemaps[],
	sceneTextures[]
}

BaseTechnique {
	
	requiredInputs : [ "opaqueObjects", "cubemap", "scene", "reflectiveObjects"]
}

HDR cubemap scene with a post process
HighLevelRenderer 
	setup off-screen rendering
	-> CubemapTechnique(cubemapTexture)
	-> PhongShadedTechnique(phongObjects)
	-> CubemapReflectionsTechnique(cubemapTexture, reflectiveObjects)
	setup on-screen rendering
	bind render target
	-> PostProcessTechnique(bloom, tonemap, ... list of post process effects)

Shadow mapping with a post process
scene.shadows(size : 1024, filter : 8)

HighLevelRenderer
	setup off-screen rendering on rt1
	-> DepthRenderingTechnique(shadowCasters)
	if (PhongShadedTechnique hasOwnProperty setShadowMap)
		-> PhongShadedTechnique(phongObjects).setShadowMap(rt1)

	if (CubemapReflectionsTechnique hasOwnProperty setShadowMap)
		-> CubemapReflectionsTechnique(cubemapTexture, reflectiveObjects).setShadowMap(rt1)
	setup on-screen rendering
	bind render target
	-> PostProcessTechnique(bloom, tonemap, ... list of post process effects)

Cube with some faces reflecting the contents of a scene and other faces being texture by the off-screen rendering of a scene

MultiMaterial : {
	ReflectiveMaterial.reflectsScene(scene),
	TextureShadeless.sceneTexture(scene)
}

HighLevelRenderer
	detect objects with non-null reflectsScene property
		bind cubemap render target
		render scene

	detect objects with non-null sceneTexture property
		setup off-screen rendering on rt1
		render scene


